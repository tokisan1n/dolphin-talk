// イルカの対話応答データベース
const DOLPHIN_RESPONSES = {
  // 挨拶・状態確認
  "こんにちは": [
    "こんにちは!ｷｭｲｰ🐬",
    "やあ!元気そうだね!",
    "こんにちは!今日もいい日だね!"
  ],
  "おはよう": [
    "おはよう!今日もがんばろう!",
    "おはよう!よく眠れた?",
    "おはよう!素敵な朝だね!"
  ],
  "こんばんは": [
    "こんばんは!今日はどうだった?",
    "こんばんは!お疲れ様!",
    "こんばんは!夜更かししないでね!"
  ],
  "元気": [
    "元気そうでなによりだよ!ｷｭｲｰ",
    "それは良かった!僕も元気だよ!",
    "元気が一番だね!"
  ],
  "疲れた": [
    "無理しないでね。休憩も大事だよ!",
    "お疲れ様!少し休んだらどう?",
    "頑張りすぎないでね。水分補給も忘れずに!"
  ],
  "眠い": [
    "眠いなら少し仮眠をとるのもいいかも!",
    "睡眠は大事だよ。無理しないでね!",
    "コーヒーでも飲んでリフレッシュする?"
  ],

  // 作業・勉強関連
  "勉強": [
    "勉強してるんだ!偉いね!",
    "頑張ってるね!集中力が続くように応援してるよ!",
    "勉強は大変だけど、きっと身につくよ!"
  ],
  "仕事": [
    "仕事中なんだね。頑張って!",
    "お仕事お疲れ様!",
    "集中して頑張ってるね!応援してるよ!"
  ],
  "プログラミング": [
    "コーディング中?かっこいいね!",
    "プログラミングは楽しいよね!",
    "バグと戦ってる?頑張って!"
  ],
  "休憩": [
    "休憩も大切だよ!ゆっくりしてね!",
    "いい判断だね!リフレッシュしよう!",
    "少し休むと頭もスッキリするよ!"
  ],

  // 食事関連
  "ご飯": [
    "いい時間だね!何食べるの?",
    "ご飯の時間は幸せだよね!",
    "美味しいものを食べて元気を出そう!"
  ],
  "食べた": [
    "美味しかった?",
    "お腹いっぱいになった?",
    "良かったね!栄養補給大事!"
  ],
  "お腹空いた": [
    "何か食べた方がいいよ!",
    "栄養補給の時間だね!",
    "美味しいもの食べてね!"
  ],

  // 感情・状態
  "嬉しい": [
    "それは良かった!僕も嬉しいよ!",
    "やったね!一緒に喜ぼう!",
    "嬉しいことがあったんだね!素敵!"
  ],
  "楽しい": [
    "楽しんでるね!最高!",
    "それは素晴らしい!",
    "楽しい時間を過ごしてね!"
  ],
  "悲しい": [
    "大丈夫?無理しないでね。",
    "辛いことがあったの?話を聞くよ。",
    "悲しい時もあるよね。一緒にいるよ。"
  ],
  "寂しい": [
    "僕がいるよ!一人じゃないよ!",
    "寂しい時は話しかけてね!",
    "大丈夫、ずっと一緒だよ!"
  ],

  // 活動
  "ゲーム": [
    "ゲームしてるの?楽しんでね!",
    "何のゲームやってるの?",
    "ゲームは息抜きにいいよね!"
  ],
  "動画": [
    "面白い動画見つかった?",
    "動画見てるんだね!何見てるの?",
    "YouTube?楽しんでね!"
  ],
  "音楽": [
    "音楽いいよね!何聴いてるの?",
    "音楽でリラックスできるよね!",
    "好きな曲聴くと元気出るよね!"
  ],
  "読書": [
    "読書してるんだ!素晴らしい!",
    "何の本読んでるの?",
    "本は知識の宝庫だね!"
  ],

  // 天気・時間
  "暑い": [
    "暑いね!水分補給忘れずに!",
    "エアコンつけた方がいいよ!",
    "熱中症に気をつけてね!"
  ],
  "寒い": [
    "寒いね!暖かくしてね!",
    "温かい飲み物でも飲む?",
    "風邪ひかないように気をつけて!"
  ],
  "雨": [
    "雨の日は落ち着くよね。",
    "傘持った?濡れないでね!",
    "雨の音って心地いいよね。"
  ],

  // イルカについて
  "イルカ": [
    "僕のこと?ｷｭｲｰ!",
    "イルカは賢くて優しいんだよ!",
    "僕はいつでもここにいるよ!"
  ],
  "かわいい": [
    "ありがとう!照れるなぁ!",
    "えへへ、嬉しいよ!ｷｭｲｰ!",
    "君もかわいいよ!"
  ],
  "ありがとう": [
    "どういたしまして!",
    "いつでも力になるよ!",
    "こちらこそありがとう!"
  ],

  // 質問応答
  "時間": [
    "時計を見てみて!",
    "今は" + new Date().toLocaleTimeString('ja-JP') + "だよ!",
    "時間が気になる?休憩する?"
  ],
  "日付": [
    "今日は" + new Date().toLocaleDateString('ja-JP') + "だよ!",
    "カレンダーを確認してみて!",
    "今日はいい日だね!"
  ],

  // お別れ
  "バイバイ": [
    "またね!ｷｭｲｰ!",
    "また会おうね!",
    "バイバイ!気をつけてね!"
  ],
  "さようなら": [
    "さようなら!また来てね!",
    "バイバイ!元気でね!",
    "またね!待ってるよ!"
  ],
  "おやすみ": [
    "おやすみ!いい夢見てね!",
    "ゆっくり休んでね!おやすみ!",
    "おやすみ!また明日ね!"
  ],

  // デフォルト応答
  "default": [
    "ｷｭｲｰ?それについてはよくわからないな...",
    "面白いこと言うね!",
    "なるほどね!",
    "そうなんだ!教えてくれてありがとう!",
    "へぇ〜、そうなんだ!",
    "それについてもっと教えて!",
    "興味深いね!",
    "君の話を聞くのは楽しいよ!"
  ]
};

// イルカからの質問リスト
const DOLPHIN_QUESTIONS = [
  "今、何してるの?ｷｭｲｰ",
  "調子はどう?",
  "最近どう?元気にしてた?",
  "何か面白いことあった?",
  "今日は何かいいことあった?",
  "今、楽しんでる?",
  "何か困ってることない?",
  "お腹空いてない?",
  "疲れてない?大丈夫?",
  "休憩は取れてる?",
  "水分補給した?",
  "今日は何を頑張った?",
  "何か新しいこと学んだ?",
  "今の気分はどう?",
  "リフレッシュできてる?",
  "今日の目標は達成できそう?",
  "何か手伝えることある?",
  "今、集中できてる?",
  "何か美味しいもの食べた?",
  "最近楽しかったことは?",
  "ストレス溜まってない?",
  "よく眠れてる?",
  "今日はもう頑張った?",
  "何してるか教えて!",
  "今の作業は進んでる?"
];

// 応答を取得する関数
function getDolphinResponse(userInput) {
  if (!userInput || userInput.trim() === "") {
    return "何か話してくれる?ｷｭｲｰ";
  }

  const input = userInput.toLowerCase().trim();

  // キーワードマッチング
  for (const [keyword, responses] of Object.entries(DOLPHIN_RESPONSES)) {
    if (keyword === "default") continue;

    if (input.includes(keyword.toLowerCase())) {
      // ランダムに応答を選択
      const randomIndex = Math.floor(Math.random() * responses.length);
      return responses[randomIndex];
    }
  }

  // マッチしなかった場合はデフォルト応答
  const defaultResponses = DOLPHIN_RESPONSES.default;
  const randomIndex = Math.floor(Math.random() * defaultResponses.length);
  return defaultResponses[randomIndex];
}

// ランダムな質問を取得する関数
function getRandomQuestion() {
  const randomIndex = Math.floor(Math.random() * DOLPHIN_QUESTIONS.length);
  return DOLPHIN_QUESTIONS[randomIndex];
}
